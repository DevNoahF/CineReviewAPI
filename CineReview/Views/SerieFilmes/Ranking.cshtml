@model IEnumerable<CineReview.Models.DTOs.SerieFilmeRankDto>
@using CineReview.Models.Enums
@{
    ViewData["Title"] = "Ranking";
    var top = ViewBag.Top ?? 10;
}
<h1>Ranking (Top @top)</h1>
<form method="get" class="row g-2 mb-3">
    <div class="col-md-2">
        <label class="form-label">Top</label>
        <input type="number" min="1" name="top" value="@top" class="form-control" />
    </div>
    <div class="col-md-4">
        <label class="form-label">Gênero</label>
        <select name="genero" class="form-select">
            <option value="">Todos</option>
            @foreach (GeneroEnum g in Enum.GetValues(typeof(GeneroEnum))) {
                <option value="@((int)g)" selected="@(ViewBag.Genero != null && g == (GeneroEnum)ViewBag.Genero ? "selected" : null)">@g</option>
            }
        </select>
    </div>
    <div class="col-md-4">
        <label class="form-label">Tipo</label>
        <select name="tipo" class="form-select">
            <option value="">Todos</option>
            @foreach (SerieFilmeEnum t in Enum.GetValues(typeof(SerieFilmeEnum))) {
                <option value="@((int)t)" selected="@(ViewBag.Tipo != null && t == (SerieFilmeEnum)ViewBag.Tipo ? "selected" : null)">@t</option>
            }
        </select>
    </div>
    <div class="col-md-2 d-flex align-items-end">
        <button type="submit" class="btn btn-outline-primary w-100">Atualizar</button>
    </div>
</form>
<table class="table table-bordered table-sm">
    <thead>
        <tr>
            <th>#</th>
            <th>Título</th>
            <th>Gênero</th>
            <th>Tipo</th>
            <th>Avaliação</th>
            <th>Imagem</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
    @foreach (var item in Model)
    {
        <tr>
            <td>@item.Posicao</td>
            <td>@item.Titulo</td>
            <td>@item.Genero</td>
            <td>@item.Tipo</td>
            <td>@item.Avaliacao.ToString("0.0")</td>
            <td>@if(!string.IsNullOrWhiteSpace(item.ImagemURL)){<img src="@item.ImagemURL" alt="@item.Titulo" style="height:50px;object-fit:cover;" />}</td>
            <td><a asp-action="Details" asp-route-id="@item.Id" class="btn btn-sm btn-outline-secondary">Ver</a></td>
        </tr>
    }
    </tbody>
</table>
<p><a asp-action="Index" class="btn btn-secondary">Voltar</a></p>
